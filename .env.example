# MSSQL MCP Server Configuration
# All database-related variables must use the MSSQL_ prefix

# ============================================================
# REQUIRED DATABASE CONNECTION SETTINGS
# ============================================================

MSSQL_SERVER=your-server.database.windows.net
MSSQL_DATABASE=your-database-name
MSSQL_USER=your-username
MSSQL_PASSWORD=your-password

# ============================================================
# OPTIONAL CONNECTION SETTINGS
# ============================================================

# Trust server certificate (useful for development with self-signed certs)
# Default: false
MSSQL_TRUST_SERVER_CERTIFICATE=false

# Connection timeout in seconds
# Default: 30
MSSQL_CONNECTION_TIMEOUT=30

# ============================================================
# APPLICATION SETTINGS
# ============================================================

# Read-only mode: Only allow SELECT queries (list_tables, read_data, describe_table)
# When true, all write operations are disabled
# Default: false
READONLY=false

# ============================================================
# SAFETY CONFIGURATION
# ============================================================

# -----------------
# DANGEROUS OPERATIONS (DROP)
# -----------------

# Allow DROP operations (tables, indexes)
# DROP operations are FORBIDDEN by default for maximum safety
# Must explicitly set to 'true' to enable DROP TABLE/INDEX operations
# ⚠️  CRITICAL WARNING: DROP permanently deletes tables/indexes and all data
# Default: false (FORBIDDEN)
ALLOW_DANGEROUS_OPERATIONS=false

# -----------------
# REGULAR OPERATIONS APPROVAL
# -----------------

# Require approval for CREATE operations (CREATE TABLE, CREATE INDEX)
# When 'true', CREATE operations are blocked until explicitly enabled
# Default: false
REQUIRE_APPROVAL_CREATE=false

# Require approval for UPDATE operations
# When 'true', UPDATE operations are blocked until explicitly enabled
# Default: false
REQUIRE_APPROVAL_UPDATE=false

# Require approval for DELETE operations (removes rows from table)
# When 'true', DELETE operations are blocked until explicitly enabled
# Note: DELETE removes rows, DROP removes entire tables (different operations!)
# Default: false
REQUIRE_APPROVAL_DELETE=false

# Require approval for INSERT operations
# When 'true', INSERT operations are blocked until explicitly enabled
# Default: false
REQUIRE_APPROVAL_INSERT=false

# -----------------
# DRY-RUN AND LOGGING
# -----------------

# Enable dry-run mode for all destructive operations
# When 'true', all CREATE, DROP, UPDATE, DELETE, and INSERT operations are:
#   - Previewed with the exact SQL query
#   - Show estimated impact
#   - NOT executed (no database changes occur)
# Essential for testing and understanding what the LLM intends to do
# Recommended: Always enable for DROP operations even when ALLOW_DANGEROUS_OPERATIONS=true
# Default: false
ENABLE_DRY_RUN=false

# Directory for operation logs
# All destructive operations are automatically logged with:
#   - Timestamp, operation type, severity
#   - Target (table name)
#   - Full SQL query
#   - Success/failure status
# Provides audit trail for compliance and debugging
# Default: ./logs
OPERATION_LOG_DIR=./logs

# ============================================================
# RECOMMENDED CONFIGURATIONS
# ============================================================

# Development/Testing (Safest):
# ENABLE_DRY_RUN=true
# ALLOW_DANGEROUS_OPERATIONS=false
# REQUIRE_APPROVAL_CREATE=false
# REQUIRE_APPROVAL_UPDATE=false
# REQUIRE_APPROVAL_DELETE=false
# REQUIRE_APPROVAL_INSERT=false

# Production (Read-Only):
# READONLY=true

# Production (With Write Access, Maximum Safety):
# READONLY=false
# ALLOW_DANGEROUS_OPERATIONS=false
# REQUIRE_APPROVAL_CREATE=true
# REQUIRE_APPROVAL_UPDATE=false
# REQUIRE_APPROVAL_DELETE=true
# REQUIRE_APPROVAL_INSERT=false
# OPERATION_LOG_DIR=/var/log/mcp

# Production (Allow DROP with extreme caution):
# ⚠️  USE WITH EXTREME CAUTION
# READONLY=false
# ALLOW_DANGEROUS_OPERATIONS=true
# ENABLE_DRY_RUN=true  # ⚠️  ALWAYS preview DROP first!
# REQUIRE_APPROVAL_CREATE=false
# REQUIRE_APPROVAL_DELETE=false
# OPERATION_LOG_DIR=/var/log/mcp